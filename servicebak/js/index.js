$(function() {    $.ajaxSetup({        async: false    });    $.getScript("lib/sp-lib/md5.js");    $.getScript("lib/sp-lib/extent.js");    $.getScript("js/check.js");    $.ajaxSetup({        async: true    });    StartWebPage();});function StartWebPage() {    $("#Login_UserName").focus();    var regCode = getQueryString("ic");    if (regCode.length > 0) {        UserReg(regCode);        return;    }    if ("1" == Cookies.get("keep")) {        if (null != Cookies.get("user")) {            $("#Login_UserName").val(Cookies.get("user"));        }        if (null != Cookies.get("password")) {            $("#Login_UserPassword").val("spiritsoft");        }        $("#Check_KeepLogin").attr("checked", "true");        DoUserLogin(Cookies.get("user"), Cookies.get("password"));    }    if ("yes" == Cookies.get("keepnews")) {        $("#Check_KeepNews").attr("checked", "true");    } else {        $("#Check_KeepNews").removeAttr("checked");    }}function UserLogin() {    var userName = $("#Login_UserName").val();    var userPassword = $("#Login_UserPassword").val();    if (("" == userName)) {        alert("用户名不能为空");        $("#Login_UserName").focus();        return;    }    if ("" == userPassword) {        alert("登录密码不能为空");        $("#Login_UserPassword").focus();        return;    }    if ($("#Check_KeepLogin").attr("checked")) {        Cookies.set("keep", "1");        if ("" != userName) {            Cookies.set("user", userName);        }        if ("" != userPassword) {            Cookies.set("password", String(userPassword));        }    } else {        Cookies.clear("keep");        Cookies.clear("user");        Cookies.clear("password");    }    DoUserLogin(userName, String(userPassword));}function DoUserLogin(userName, userPassword) {    var objUser = {};    objUser.name = String(userName);    objUser.chkpwd = String(userPassword);    $.post(g_webaction, {        f: 4,        i: String($.toJSON(objUser))    },    function(json) {        var jsonObj = $.evalJSON(json);        if (0 == jsonObj.error) {            if ($("#Check_KeepNews").attr("checked")) {                window.document.location = "center.html";                Cookies.set("keepnews", "yes");            } else {                window.document.location = "center.html";                Cookies.clear("keepnews");            }        } else {            alert("用户名或密码错误");        }    });}function RegUserLogin() {    $("#Login_UserName").val(objUser.name);    $("#Login_UserPassword").val(objUser.pwd);    CloseUserReg();    UserLogin();}function UserReg(regCode) {    objUser.cc = "";    objUser.name = "";    objUser.pwd = "";    objUser.email = "";    objUser.question = "";    objUser.answer = "";    $("#Reg_UserName").val("").next().hide();    $("#Reg_UserPassword").val("").next().hide();    $("#Reg_UserPassword_Confirm").val("").next().hide();    $("#Reg_UserEMail").val("@").next().html("无效的邮箱地址").hide();    $("#Reg_UserQuestion").val("").next().hide();    $("#Reg_UserAnswer").val("").next().hide();    $("#Reg_VerifyCode").val("").next().next().hide();    $("#Pas_UserStart").show();    $("#Pas_UserEnd").hide();    $("#Reg_UserStart").show();    $("#Reg_UserEnd").hide();    OpenBack();    var objDiv = $("#Reg_User");    var nHeight = objDiv.height();    var nWidth = objDiv.width();    nHeight = (document.body.clientHeight - nHeight) / 2;    nWidth = (document.body.clientWidth - nWidth) / 2;    objDiv.css({        top: (document.body.scrollTop + nHeight),        left: nWidth    }).show();    $("#Reg_UserName").focus();}function CloseUserReg() {    $("#Reg_User").hide();    CloseBack();}function FindPassword() {    $("#Pas_UserName").val("").next().hide();    $("#Pas_UserEMail").val("@").next().hide();    $("#Span_Pas_Question").html('在填写完"登录帐号"和"您的Email"后会自动获取');    $("#Pas_UserAnswer").val("").next().hide();    $("#Pas_UserPassword").val("").next().hide();    $("#Pas_UserPassword_Confirm").val("").next().hide();    $("#Pas_VerifyCode").val("").next().next().hide();    OpenBack();    var objDiv = $("#Reg_FindPassword");    var nHeight = objDiv.height();    var nWidth = objDiv.width();    nHeight = (document.body.clientHeight - nHeight) / 2;    nWidth = (document.body.clientWidth - nWidth) / 2;    objDiv.css({        top: (document.body.scrollTop + nHeight),        left: nWidth    }).show();    $("#Pas_UserName").focus();}function CloseFindPassword() {    $("#Reg_FindPassword").hide();    CloseBack();}function OpenBack() {    var nHeight = document.body.scrollHeight - document.body.clientHeight;    $("#Div_Back").height((nHeight >= 0) ? document.body.scrollHeight: document.body.clientHeight).show();}function CloseBack() {    $("#Div_Back").hide();}var objUser = {};objUser.cc = "";objUser.name = "";objUser.pwd = "";objUser.email = "";objUser.question = "";objUser.answer = "";function RegNewUser() {    if (!CheckUser()) {        alert("请输入有效的用户名");        $("#Reg_UserName").focus().select();        return;    }    if (!CheckLoginPassword()) {        alert("请输入有效的登录密码");        $("#Reg_UserPassword").focus().select();        return;    }    if (!CheckConfirmPassword()) {        alert("请输入有效的确认密码");        $("#Reg_UserPassword_Confirm").focus().select();        return;    }    if (!CheckEMail()) {        alert("请输入有效的E-Mail");        $("#Reg_UserEMail").focus().select();        return;    }    if (!CheckResetPasswordQuestion) {        alert("请输入有效的密码保护问题");        $("#Reg_UserQuestion").focus().select();        return;    }    if (!CheckResetPasswordAnswer()) {        alert("请输入有效的密码保护答案");        $("#Reg_UserAnswer").focus().select();        return;    }    if (!ChecVerifyCode()) {        alert("'验证码'无效");        $("#Reg_VerifyCode").focus().select();        return;    }    if (!$("#Reg_License").attr("checked")) {        alert("您未同意服务条款");        return;    }    objUser.name = $("#Reg_UserName").val();    objUser.pwd = $("#Reg_UserPassword").val();    objUser.email = $("#Reg_UserEMail").val();    objUser.question = $("#Reg_UserQuestion").val();    objUser.answer = $("#Reg_UserAnswer").val();    objUser.cc = $("#Reg_VerifyCode").val();    $.post(g_webaction, {        f: 2,        i: String($.toJSON(objUser))    },    function(json) {        var jsonObj = $.evalJSON(json);        if ("0" == jsonObj.error) {            $("#Reg_UserStart").hide();            $("#Reg_UserEnd").show();            window.scrollTo(0, 0);        } else {            alert("注册失败，请检查注册信息是否有效");            $("#Reg_VerifyCode").val("");        }    });}function PasResetPassword() {    if (!PasCheckUser()) {        alert("请输入有效的用户名");        $("#Pas_UserName").focus().select();        return;    }    if (!PasCheckEMail()) {        alert("请输入有效的E-Mail");        $("#Pas_UserEMail").focus().select();        return;    }    if (!PasCheckPasswordAnswer()) {        alert("请输入有效的密码保护答案");        $("#Pas_UserAnswer").focus().select();        return;    }    if (!PasCheckLoginPassword()) {        alert("请输入有效的新密码");        $("#Pas_UserPassword").focus().select();        return;    }    if (!PasCheckConfirmPassword()) {        alert("请输入有效的确认密码");        $("#Pas_UserPassword_Confirm").focus().select();        return;    }    if (!PasChecVerifyCode()) {        alert("'验证码'无效");        $("#Pas_VerifyCode").focus().select();        return;    }    var objUser = {};    objUser.name = $("#Pas_UserName").val();    objUser.email = $("#Pas_UserEMail").val();    objUser.question = $("#Span_Pas_Question").html();    objUser.answer = $("#Pas_UserAnswer").val();    objUser.pwd = $("#Pas_UserPassword").val();    objUser.cc = $("#Pas_VerifyCode").val();    $.post(g_webaction, {        f: 6,        i: String($.toJSON(objUser))    },    function(json) {        var jsonObj = $.evalJSON(json);        if (0 == jsonObj.error) {            $("#Pas_UserStart").hide();            $("#Pas_UserEnd").show();            window.scrollTo(0, 0);        } else {            alert("重置密码失败，请输入正确的密码保护信息");            $("#Pas_VerifyCode").val("");        }    });}function PasUserLogin() {    $("#Login_UserName").val($("#Pas_UserName").val());    $("#Login_UserPassword").val($("#Pas_UserPassword").val());    CloseFindPassword();    UserLogin();}